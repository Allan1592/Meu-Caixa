<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Meu Caixa</title>
    <link rel="stylesheet" href="style.css?v=27">
</head>
<body>
    <div class="app">
        <div class="header-novo">
            <button class="btn-circular" onclick="fazerBackup()" title="Backup">ðŸ“¤</button>
            <h1>Meu Caixa</h1>
            <button class="btn-circular" onclick="alternarTema()" title="Tema">ðŸŒ“</button>
        </div>

        <div class="card-resumo">
            <input type="month" id="mesFiltro" onchange="renderizar()">
            <div class="linha-resumo"><span>Entradas:</span> <span id="resumoEntradas" class="verde">R$ 0,00</span></div>
            <div class="linha-resumo"><span>SaÃ­das:</span> <span id="resumoSaidas" class="vermelho">R$ 0,00</span></div>
            <div class="linha-resumo total"><span>Saldo:</span> <span id="resumoSaldo">R$ 0,00</span></div>
        </div>

        <div class="formulario">
            <input type="text" id="descricao" placeholder="DescriÃ§Ã£o (ex: Aluguel)">
            <div class="row">
                <input type="number" id="valor" placeholder="R$ 0,00" step="0.01">
                <select id="tipo">
                    <option value="receita">Receita</option>
                    <option value="despesa" selected>Despesa</option>
                </select>
            </div>
            <div class="row">
                <input type="date" id="dataVencimento">
                <select id="recorrencia" onchange="ajustarCamposRecorrencia()">
                    <option value="unica">Ãšnica</option>
                    <option value="fixa">Fixa (Mensal)</option>
                    <option value="parcelada">Parcelada</option>
                </select>
            </div>
            <div id="divParcelas" style="display:none">
                <input type="number" id="numParcelas" placeholder="NÃºmero de parcelas" min="2" value="2">
            </div>
            <button onclick="adicionar()">Adicionar LanÃ§amento</button>
        </div>

        <div class="filtros-tipo">
            <button class="filter-btn active" onclick="filtrarTipo('todos', this)">Todos</button>
            <button class="filter-btn" onclick="filtrarTipo('receita', this)">Receitas</button>
            <button class="filter-btn" onclick="filtrarTipo('despesa', this)">Despesas</button>
        </div>

        <input type="text" id="busca" placeholder="ðŸ” Buscar lanÃ§amento..." oninput="renderizar()">
        
        <ul id="listaTransacoes" class="lista-transacoes"></ul>

        <div id="areaBackup" style="display:none; margin-top: 20px; background: var(--card); padding: 15px; border-radius: 10px; border: 1px dashed var(--primary);">
            <p style="font-size: 12px; margin-top: 0;">CÃ³pia de SeguranÃ§a:</p>
            <textarea id="textoBackup" style="width:100%; height:80px; font-size:10px; border-radius: 5px; background: #f9f9f9; color: #333;" readonly></textarea>
            <button onclick="copiarBackup()" style="margin-top:10px; font-size:12px; padding: 5px;">Copiar CÃ³digo</button>
            <button onclick="document.getElementById('areaBackup').style.display='none'" style="background:#7f8c8d; font-size:12px; padding: 5px;">Fechar</button>
        </div>

        <div class="acoes-perigosas">
            <button onclick="confirmarLimpeza('mes')" class="btn-outline">Apagar este MÃªs</button>
            <button onclick="confirmarLimpeza('tudo')" class="btn-outline-vermelho">Limpar Tudo</button>
        </div>
    </div>

    <div id="modalConfirm" class="modal"><div class="modal-content">
        <h3>Excluir?</h3>
        <p id="msgConfirm"></p>
        <div id="botoesExclusaoSimples" class="modal-buttons">
            <button onclick="fecharModal('modalConfirm')" class="btn-cinza">Cancelar</button>
            <button id="btnConfirmarSimples" class="btn-vermelho">Excluir</button>
        </div>
        <div id="botoesExclusaoGrupo" class="modal-buttons" style="display:none; flex-direction: column; gap: 10px;">
            <button id="btnExcluirUm" class="btn-vermelho">Apenas esta</button>
            <button id="btnExcluirTodos" class="btn-vermelho" style="background:#c0392b !important">Todas as parcelas</button>
            <button onclick="fecharModal('modalConfirm')" class="btn-cinza">Voltar</button>
        </div>
    </div></div>

    <div id="modalEdit" class="modal"><div class="modal-content">
        <h3>Editar</h3>
        <input type="text" id="editDescricao">
        <input type="number" id="editValor" step="0.01">
        <input type="date" id="editData">
        <div class="modal-buttons">
            <button onclick="fecharModal('modalEdit')" class="btn-cinza">Sair</button>
            <button id="btnConfirmarEdicao" class="btn-verde-ok">Salvar</button>
        </div>
    </div></div>

    <script src="dashboard.js?v=27"></script>
</body>
</html>
